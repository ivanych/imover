# imover [![Build Status](https://travis-ci.org/ivanych/imover.png?branch=master)](https://travis-ci.org/ivanych/imover)

Скрипт для переименования и сортировки фото и видеофайлов по дате съемки.

Скрипт принимает на STDIN список файлов и перемещает их в папки, соответствующие дате съемки.

Шаблон создаваемой папки и имени файла:

```
Устройство Год/Год-Месяц-День/Год-Месяц-День_Номер.Расширение
```

* Дата съемки и название устройства берутся из данных EXIF. Если дата неизвестна, указывается `0000-00-00`. Если устройство неизвестно, указывается `Unknown`.
* Номер берется из имени файла (последние 3-4 цифры перед расширением) или из размера файла (последние 1-4 цифры).
* Расширение приводится к нижнему регистру.

## Опции запуска

``` sh
imover.pl [-a] [-c [-d]] [--root FILE]
```

При запуске без опций скрипт выводит список перемещаемых файлов в виде:

```
исходный файл -> куда он будет перемещен
```

Реального перемещения файлов при  этом не происходит.

**-a**  Показать список файлов, не подлежащих перемещению (каталоги и файлы неподдерживаемых типов).

**-c**  Скопировать файлы. Исходные файлы останутся на месте.

**-d**  Удалить исходные файлы.

**--root**  Корневой каталог, в который будут перемещаться файлы. По умолчанию это каталог imover в домашнем каталоге пользователя.

## Настраиваемые (в скрипте) параметры

### %folder

Каталоги, в которые будут перемещаться фото и видео файлы.

Файлы разных типов можно размещать в разных каталогах. Тип файла определяется расширением.

### $model

Модели устройств.

* Файлы с указанных тут устройств будут размещены в соответствующих папках.
* Файлы с опознанных (но не указанных тут) устройств будут размещены в папках с именем опознанного устройства.
* Все прочие файлы будут размещены в папке устройства `Unknown`.
